# Repository Guidelines

## Project Structure & Module Organization
- `app/` houses all client logic: `routes/` for page-level loaders and UI, `components/` for reusable atoms/molecules, `graphql/` for generated clients, `queries/` for hand-authored documents, `stores/` for Zustand state, and `visualization/` for D3-heavy views.
- `public/` holds static assets served as-is. `build/` is generated by the router build; avoid editing it manually.
- Use `schema.graphql` with `codegen.ts` to keep typed GraphQL operations current whenever server fields change.

## Build, Test, and Development Commands
- `pnpm install` — ensure dependencies match `pnpm-lock.yaml`.
- `pnpm dev` — start the React Router dev server with fast refresh.
- `pnpm build` — produce the production bundle under `build/`.
- `pnpm start` — serve a previously built bundle.
- `pnpm lint(:check)` — run ESLint (check or fix).
- `pnpm typecheck` — generate router types then run `tsc`.
- `pnpm codegen` — regenerate GraphQL types after schema or query updates.
- `pnpm format(:check)` — apply Prettier with the Tailwind plugin.

## Coding Style & Naming Conventions
- TypeScript + JSX throughout; favor functional components with PascalCase names and export hooks with `use` prefixes.
- Let Prettier dictate whitespace (2-space indents, semicolons on) and keep Tailwind class order untouched to avoid format churn.
- Follow ESLint defaults; prefix intentionally unused items with `_` to satisfy `no-unused-vars`.
- Place shared UI primitives in `app/components` and feature flows under `app/routes/<feature>`.

## Testing Guidelines
- No automated test harness ships yet; exercise changes via `pnpm dev` and add targeted component or hook tests for critical logic.
- Co-locate `.test.tsx`/`.test.ts` files beside the code they cover.
- Document any new test command in `package.json` and outline manual steps in your PR description.

## Commit & Pull Request Guidelines
- Commits follow a lightweight Conventional Commits style (`feat:`, `fix:`, `chore:`). Keep messages imperative and scoped to a single concern.
- Squash WIP commits before merging; final history should read as deployable units.
- Pull requests must describe intent, outline manual verification, and link related issues. Provide screenshots or GIFs for UI changes and mention if `pnpm codegen` or migrations were run.

## GraphQL & Data Hygiene
- Prefer using generated hooks from `app/graphql` instead of hand-rolling clients.
- When touching queries, re-run `pnpm codegen` and commit the resulting artifacts.
- Deployment scripts expect env vars at runtime; never commit secrets.
