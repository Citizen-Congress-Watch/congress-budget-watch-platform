import{y as T,p as e,x as i}from"./chunk-EPOLDU6W-BUbbWhPN.js";import{u,k as b}from"./gql-DnELGFVa.js";import{S as L,I as o,b as f,a as P,G as A}from"./visualization.queries-BdRT5NRX.js";import{P as m,a as C,D as y}from"./progress-stages-526PVMKw.js";const G=t=>!!t&&m.includes(t),O=t=>!!t&&Object.hasOwn(y,t),j=t=>{if(!G(t))return{stage:t,index:-1,percentage:0,label:"未知階段",isValid:!1};const r=m.indexOf(t),a=m.length,s=a?Math.round((r+1)/a*100):0;return{stage:t,index:r,percentage:s,label:C[t],isValid:!0}},k=(t,r,a)=>{const s=j(r),l=O(a)?y[a]:"進行中";return{text:t?`${t} 年度中央政府總預算${l}`:"載入中...",percentage:s.percentage,stageLabel:s.label,stageMeta:s}};function I(t){return j(t).percentage}function F(t,r){return k(t,null,r).text}const d="收錄歷年及最新中央政府預算審議情形，包含立委提案刪減和凍結的緣由和金額，便於搜尋及比較，更能即時追蹤最新審議進度。還可透過視覺化方式瀏覽，一目暸然。除了已數位化的資料，此平台也透過群眾協力（crowdsourcing）辨識提案掃描檔，歡迎至協作區加入合作行列。",g="【持續更新】中央政府總預算案審查監督平台",x="https://readr-media.github.io/congress-budget-watch-platform/",w=`${x}image/og.png`;function q(){return[{title:g},{property:"og:title",content:g},{name:"description",content:d},{property:"og:description",content:d},{property:"og:url",content:x},{property:"og:type",content:"website"},{property:"og:image",content:w},{property:"og:image:width",content:"2400"},{property:"og:image:height",content:"1260"},{name:"twitter:card",content:"summary_large_image"},{property:"twitter:domain",content:"readr-media.github.io"},{property:"twitter:url",content:x},{name:"twitter:title",content:g},{name:"twitter:description",content:d},{name:"twitter:image",content:w}]}const z=()=>[{rel:"preload",as:"image",href:`${L}/image/homepage-banner.svg`,fetchpriority:"high"}],D=t=>{const r=(t??[]).map(a=>a==null?void 0:a.year).filter(a=>typeof a=="number");return r.length?r[0]:null},B=T(function(){var p;const{data:r,isLoading:a,isError:s}=u({queryKey:f.latest(),queryFn:()=>b(P,{skip:0,take:1})}),{data:l}=u({queryKey:f.years(),queryFn:()=>b(A),staleTime:300*1e3}),n=((p=r==null?void 0:r.budgetYears)==null?void 0:p[0])??null,h=D((l==null?void 0:l.budgetYears)??null),N=h?`/all-budgets?year=${h}`:"/all-budgets",_=n==null?void 0:n.budgetProgress,v=I(_),E=F((n==null?void 0:n.year)??null,(n==null?void 0:n.dataProgress)??null),S=[{label:"歷年預算",href:"/all-budgets"},{label:"最新年度預算",href:N},{label:"視覺化專區",href:"/visualization"},{label:"協作區",href:"/collaboration"}];return e.jsxs("div",{className:"bg-background flex h-full flex-col justify-between p-5 md:p-8",children:[e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("header",{className:"mb-8 text-center md:mb-12",children:[e.jsx("h1",{className:"mb-6 text-3xl font-bold text-gray-900 md:text-4xl",children:"中央政府總預算案審查監督平台"}),e.jsxs("div",{className:"relative mb-8 flex flex-col items-center justify-center",children:[e.jsx(o,{src:"/image/homepage-banner.svg",alt:"國會預算監督平台 Banner",width:380,height:189,loading:"eager",fetchPriority:"high",className:"h-auto w-full max-w-xl"}),a?e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-gray-300 p-2 text-gray-600",children:"載入審議進度中..."}):s?e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-red-100 p-2 text-red-600",children:"審議進度載入失敗，請稍後再試"}):n?e.jsxs("div",{className:"max-w-banner bg-brand-primary relative -mt-1 flex min-h-[48px] w-full items-center justify-start rounded-lg pl-1 text-white",children:[e.jsx("div",{className:"border-brand-primary text-brand-primary absolute top-0 left-1/2 flex -translate-x-1/2 -translate-y-5/6 items-center justify-center rounded-lg border-2 bg-white px-1.5 py-2 text-center text-base font-bold shadow-lg md:hidden",children:"最新審議進度"}),e.jsx("p",{className:"text-brand-primary mr-2 hidden w-[160px] rounded-lg bg-white px-3.5 py-2 md:flex",children:"最新審議進度"}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("p",{className:"flex grow justify-center border-r border-white py-2",children:E}),e.jsxs("p",{className:"flex px-2",children:[v,"%"]})]})]}):e.jsx("div",{className:"max-w-banner -mt-1 flex min-h-[60px] w-full items-center justify-center rounded-lg bg-gray-300 p-2 text-gray-600",children:"暫無審議進度資料"})]}),e.jsx("p",{className:"mx-auto max-w-2xl text-base leading-relaxed text-gray-700 md:text-lg",children:"收錄歷年及最新中央政府預算審議情形，包含立委提案刪減和凍結的緣由和金額，便於搜尋及比較，更能即時追蹤最新審議進度。還可透過視覺化方式瀏覽，一目暸然。除了已數位化的資料，此平台也透過群眾協力（crowdsourcing）辨識提案掃描檔，歡迎至協作區加入合作行列。"})]}),e.jsx("nav",{className:"flex flex-col gap-3 md:grid md:grid-cols-2 md:gap-6 lg:grid-cols-4 lg:gap-4","aria-label":"main navigate",children:S.map(c=>e.jsx(i,{to:c.href,className:({isActive:R})=>`border-brand-accent flex min-h-[72px] w-full items-center justify-center rounded-lg border-3 px-6 py-4 text-center text-lg font-medium transition-colors ${R?"bg-brand-accent":"hover:bg-brand-accent bg-white hover:text-black"} focus:ring-brand-accent text-budget-accent focus:ring-2 focus:ring-offset-2 focus:outline-none`,children:c.label},c.label))})]}),e.jsxs("div",{className:"mt-15 flex items-center justify-center gap-x-2 md:mt-25 md:gap-x-3",children:[e.jsx(i,{to:"https://www.readr.tw/",target:"_blank",rel:"noopener noreferrer","aria-label":"Readr",children:e.jsx(o,{src:"/image/readr-logo.svg",alt:"Readr logo",width:110,height:48})}),e.jsx(i,{to:"https://www.freiheit.org/zh/taiwan",target:"_blank",rel:"noopener noreferrer","aria-label":"Friedrich Naumann Foundation",children:e.jsx(o,{src:"/image/Friedrich-Naumann-Foundation-logo.svg",alt:"Friedrich-Naumann-Foundation-logo",width:130,height:48,className:"h-auto w-[130px] md:w-50"})}),e.jsx(i,{to:"https://ccw.org.tw/",target:"_blank",rel:"noopener noreferrer","aria-label":"Citizen Congress Watch",children:e.jsx(o,{src:"/image/CCW-logo.svg",alt:"Citizen-Watch-logo",width:90,height:48})}),e.jsx(o,{src:"/image/donate-CCW-logo.svg",alt:"donate-CCW-logo",width:120,height:48})]})]})});export{B as default,z as links,q as meta};
